<div class="container">
  <div class="row">
    <div class="col-sm word-wrap">
      <% if !@movie.poster_path.nil? %>
        <%= image_tag small_movie_poster_url(@movie) %>
      <% end %>
      <h2><%= @movie.title %></h2>
      <% if @not_saved %>
        <span class="badge badge-warning">NOT in DB</span>
      <% else %>
        <span class="badge badge-success">In database<i class="fa fa-check"></i></span>
      <% end %>
      <div class="btn-group">
        <button class="btn btn-dark btn-sm dropdown-toggle mx-1" type="button" data-toggle="dropdown">
          Add To List
        </button>
        <div class="dropdown-menu">
          <% actual_tmdb_id = @movie.tmdb_id.nil? ? @movie.id : @movie.tmdb_id %>
          <% current_user.lists.each do |list| %>
            <% classes = ["dropdown-item"] %>
            <% classes << "disabled" if list.movies.include? @movie %>
            <%= link_to list.name, add_path(tmdb_id: actual_tmdb_id, list_id: list.id), class: classes %>
          <% end %>
        </div>
      </div>
      <%= link_to 'Add to Queue', queue_path(tmdb_id: actual_tmdb_id), method: :post, class: "btn btn-sm btn-success mx-1" %>
      <div class="list-group"><p>
        <% if @movie.class == Tmdb::Movie %>
          <% @movie.each_pair do |key, value| %>
            <p class="list-group-item">
              <strong><%= key %>: </strong>
              <%= value %>
            </p>
          <% end %>
        <% else %>
          <% @movie.attributes.each_pair do |key, value| %>
            <p>
              <strong><%= key %>: </strong>
              <%= value %>
            </p>
          <% end %>
        <% end %>
      </p></div>
    </div>
  </div>
</div>
